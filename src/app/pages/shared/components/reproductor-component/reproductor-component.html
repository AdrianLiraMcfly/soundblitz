<div *ngIf="currentSong" 
     class="fixed bottom-0 left-0 right-0 bg-gradient-to-t from-gray-900 to-gray-800 border-t border-gray-700 shadow-2xl z-40 animate-slide-up">
  <div class="max-w-screen-2xl mx-auto px-4 py-3">
    <div class="flex items-center justify-between gap-4">
      
      <!-- Información de la canción (izquierda) -->
      <div class="flex items-center gap-4 min-w-0 flex-1 lg:flex-none lg:w-80">
        <!-- Portada -->
        <div class="relative group flex-shrink-0">
          <div class="w-14 h-14 rounded-lg overflow-hidden shadow-lg">
            <img *ngIf="currentSong.url_portada" 
                 [src]="currentSong.url_portada" 
                 [alt]="currentSong.nombre"
                 class="w-full h-full object-cover transition-transform group-hover:scale-110">
            <div *ngIf="!currentSong.url_portada" 
                 class="w-full h-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
              <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
              </svg>
            </div>
          </div>
          <!-- Badge de reproduciendo -->
          <div *ngIf="isPlaying" class="absolute -top-1 -right-1">
            <div class="relative flex h-3 w-3">
              <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
              <span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span>
            </div>
          </div>
        </div>
        
        <!-- Info texto -->
        <div class="min-w-0 flex-1">
          <h4 class="text-white font-semibold text-sm truncate hover:text-green-400 transition cursor-pointer">
            {{ currentSong.nombre }}
          </h4>
          <p class="text-gray-400 text-xs truncate hover:text-gray-300 transition cursor-pointer">
            {{ currentSong.artistaNombre || 'Artista desconocido' }}
          </p>
        </div>

        <!-- Botón de favorito (móvil hidden) -->
        <button class="hidden lg:block p-2 text-gray-400 hover:text-red-500 transition-colors" 
                title="Agregar a favoritos">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
          </svg>
        </button>
      </div>
      
      <!-- Controles centrales -->
      <div class="flex-1 max-w-2xl">
        <!-- Botones de control -->
        <div class="flex items-center justify-center gap-2 mb-2">
          <!-- Aleatorio -->
          <button class="hidden md:block p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50" 
                  title="Aleatorio">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"/>
            </svg>
          </button>

          <!-- Anterior -->
          <button (click)="playPrevious()" 
                  class="p-2 text-gray-400 hover:text-white transition-all rounded-full hover:bg-gray-700/50 hover:scale-110" 
                  title="Anterior">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
            </svg>
          </button>
          
          <!-- Play/Pause -->
          <button (click)="togglePlayPause()" 
                  class="p-3 bg-white rounded-full text-black hover:scale-110 transition-all shadow-lg hover:shadow-xl" 
                  title="{{ isPlaying ? 'Pausar' : 'Reproducir' }}">
            <svg *ngIf="!isPlaying" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M8 5v14l11-7z"/>
            </svg>
            <svg *ngIf="isPlaying" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
            </svg>
          </button>
          
          <!-- Siguiente -->
          <button (click)="playNext()" 
                  class="p-2 text-gray-400 hover:text-white transition-all rounded-full hover:bg-gray-700/50 hover:scale-110" 
                  title="Siguiente">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
            </svg>
          </button>

          <!-- Repetir -->
          <button class="hidden md:block p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50" 
                  title="Repetir">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
            </svg>
          </button>
        </div>

        <!-- Barra de progreso -->
        <div class="flex items-center gap-2">
          <span class="text-xs text-gray-400 w-10 text-right tabular-nums">
            {{ formatTime(currentTime) }}
          </span>
          
          <div (click)="onProgressClick($event)" 
               class="flex-1 h-1.5 bg-gray-700 rounded-full cursor-pointer group relative overflow-hidden">
            <!-- Progreso de carga (opcional) -->
            <div class="absolute inset-0 bg-gray-600 rounded-full" style="width: 100%"></div>
            <!-- Progreso actual -->
            <div class="absolute inset-0 bg-gradient-to-r from-green-500 to-green-400 rounded-full transition-all"
                 [style.width.%]="progressPercent">
              <!-- Indicador circular -->
              <div class="absolute right-0 top-1/2 -translate-y-1/2 w-3 h-3 bg-white rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity"></div>
            </div>
          </div>
          
          <span class="text-xs text-gray-400 w-10 tabular-nums">
            {{ formatTime(duration) }}
          </span>
        </div>
      </div>

      <!-- Controles de volumen y extras (derecha) -->
      <div class="hidden lg:flex items-center gap-2 w-80 justify-end">
        <!-- Cola de reproducción -->
        <button class="p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50" 
                title="Cola de reproducción">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"/>
          </svg>
        </button>

        <!-- Control de volumen -->
        <div class="relative flex items-center gap-2">
          <button (click)="toggleMute()" 
                  class="p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50" 
                  title="{{ isMuted ? 'Activar sonido' : 'Silenciar' }}">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path [attr.d]="getVolumeIcon()"/>
            </svg>
          </button>
          
          <!-- Slider de volumen -->
          <div class="w-24 group">
            <input type="range" 
                   min="0" 
                   max="1" 
                   step="0.01" 
                   [value]="volume"
                   (input)="onVolumeChange($event)"
                   class="w-full h-1 bg-gray-700 rounded-full appearance-none cursor-pointer volume-slider">
          </div>
        </div>

        <!-- Pantalla completa / Picture in Picture -->
        <button class="p-2 text-gray-400 hover:text-white transition-colors rounded-full hover:bg-gray-700/50" 
                title="Más opciones">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>